"use strict";function SankeyLayout(){go.LayeredDigraphLayout.call(this)}go.Diagram.inherit(SankeyLayout,go.LayeredDigraphLayout),SankeyLayout.prototype.makeNetwork=function(a){var n=go.LayeredDigraphLayout.prototype.makeNetwork.call(this,a);return this.diagram.nodes.each(function(a){var e=a.findObject("SHAPE"),t=a.findObject("SHAPEOUTSIDE");e&&(e.height=60),e&&(e.margin=new go.Margin(-73.2,0,0,0)),t&&(t.height=78);var i=a.findObject("TEXT"),e=a.findObject("LTEXT"),t="bold "+Math.max(12,Math.round(7.5))+"pt Segoe UI, sans-serif";i&&(i.font=t),e&&(e.font=t);t=n.findVertex(a);null!==t&&(a.ensureBounds(),a=a.actualBounds,t.width=a.width,t.height=a.height,t.focusY=t.height/2)}),n},SankeyLayout.prototype.nodeMinColumnSpace=function(a,e){if(null!==a.node)return go.LayeredDigraphLayout.prototype.nodeMinColumnSpace.call(this,a,e);if(1<=a.edgesCount){for(var t=1,i=a.edges;i.next();){var n=i.value;if(null!=n.link){n=n.link.computeThickness();t<n&&(t=n);break}}return Math.max(2,Math.ceil(t/this.columnSpacing))}return 2},SankeyLayout.prototype.nodeMinLayerSpace=function(a,e){return null===a.node?100:go.LayeredDigraphLayout.prototype.nodeMinLayerSpace.call(this,a,e)},SankeyLayout.prototype.assignLayers=function(){go.LayeredDigraphLayout.prototype.assignLayers.call(this);for(var a=this.maxLayer,e=this.network.vertexes.iterator;e.next();){var t=e.value;t.node;0==t.destinationVertexes.count&&(t.layer=0),0==t.sourceVertexes.count&&(t.layer=a)}},SankeyLayout.prototype.commitLayout=function(){go.LayeredDigraphLayout.prototype.commitLayout.call(this);for(var a=this.network.edges.iterator;a.next();){var e=a.value.link;e&&e.curve===go.Link.Bezier&&e.invalidateRoute()}};var animation=new go.Animation;function sankey_layout(a){6!=a?(myDiagram.div=null,myDiagram=GO(go.Diagram,Diagram_name,{initialAutoScale:go.Diagram.Uniform,"undoManager.isEnabled":!0,ModelChanged:function(){},layout:GO(SankeyLayout,{setsPortSpots:!1,direction:0,layeringOption:go.LayeredDigraphLayout.LayerOptimalLinkLength,packOption:go.LayeredDigraphLayout.PackStraighten||go.LayeredDigraphLayout.PackMedian,layerSpacing:300,columnSpacing:20})}),initOverview(),myDiagram.nodeTemplateMap.add("tree_square",tree_square_node_template()),myDiagram.nodeTemplateMap.add("",square_node_template()),myDiagram.nodeTemplateMap.add("circular",circular_node_template()),myDiagram.nodeTemplateMap.add("emphasize",fivePoints_node_template()),myDiagram.nodeTemplateMap.add("square_text",square_text_template()),myDiagram.linkTemplateMap.add("routing",routing_link_template()),myDiagram.linkTemplateMap.add("flow",flow_link_template()),myDiagram.linkTemplateMap.add("",bezier_link_template()),myDiagram.linkTemplateMap.add("dash",dash_link_template())):myDiagram.layout=GO(SankeyLayout,{setsPortSpots:!1,direction:0,layeringOption:go.LayeredDigraphLayout.LayerOptimalLinkLength,packOption:go.LayeredDigraphLayout.PackStraighten||go.LayeredDigraphLayout.PackMedian,layerSpacing:300,columnSpacing:20})}animation.easing=go.Animation.EaseLinear;