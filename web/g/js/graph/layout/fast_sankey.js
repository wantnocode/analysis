"use strict";function SavedLayeredDigraphLayout(){go.LayeredDigraphLayout.call(this)}function getAutoHeightForNode(a){for(var e=0,t=a.findLinksInto();t.next();)e+=20*t.value.computeThickness();for(var i=0,t=a.findLinksOutOf();t.next();)i+=20*t.value.computeThickness();a=Math.max(e,i);return a<10&&(a=10),a}function fast_sankey_(){myDiagram.div=null,myDiagram=GO(go.Diagram,Diagram_name,{initialAutoScale:go.Diagram.Uniform,"animationManager.isEnabled":!1,ModelChanged:function(){},layout:GO(SavedLayeredDigraphLayout,{setsPortSpots:!1,direction:0,layeringOption:go.LayeredDigraphLayout.layerOptimalLinkLength,initializeOption:go.LayeredDigraphLayout.InitDepthFirstOut,packOption:go.LayeredDigraphLayout.PackStraighten||go.LayeredDigraphLayout.PackExpand,layerSpacing:1e3,columnSpacing:1})}),initOverview();GO(go.Adornment,"Link",GO(go.Shape,{isPanelMain:!0,fill:null,stroke:"blue",strokeWidth:3}));myDiagram.nodeTemplateMap.add("tree_square",tree_square_node_template()),myDiagram.nodeTemplateMap.add("",square_node_template()),myDiagram.nodeTemplateMap.add("circular",circular_node_template()),myDiagram.nodeTemplateMap.add("emphasize",fivePoints_node_template()),myDiagram.nodeTemplateMap.add("square_text",square_text_template()),myDiagram.linkTemplateMap.add("routing",routing_link_template()),myDiagram.linkTemplateMap.add("flow",flow_link_template()),myDiagram.linkTemplateMap.add("",bezier_link_template()),myDiagram.linkTemplateMap.add("dash",dash_link_template())}go.Diagram.inherit(SavedLayeredDigraphLayout,go.LayeredDigraphLayout),SavedLayeredDigraphLayout.prototype.makeNetwork=function(a){var i=go.LayeredDigraphLayout.prototype.makeNetwork.call(this,a);return this.diagram.nodes.each(function(a){var e=getAutoHeightForNode(a),t=a.findObject("SHAPE");t&&(t.height=e);e=i.findVertex(a);null!==e&&(a.ensureBounds(),a=a.actualBounds,e.width=a.width,e.height=a.height,e.focusY=e.height/2)}),i},SavedLayeredDigraphLayout.prototype.assignLayers=function(){if(this.layerInfo)for(var a,e=this.network.vertexes.iterator;e.next();)!(i=(t=e.value).node)||"number"==typeof(a=this.layerInfo[i.data.key])&&(t.layer=a);else{go.LayeredDigraphLayout.prototype.assignLayers.call(this);for(var t,i,r={},e=this.network.vertexes.iterator;e.next();)(i=(t=e.value).node)&&(r[i.data.key]=t.layer);this.layerInfo=r}};