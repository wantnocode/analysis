"use strict";function fast_sankey_worker(){rendering_type="worker",nodeArray.forEach(function(e){e.id=e.key}),linkArray.forEach(function(e){e.source=e.from,e.target=e.to}),myDiagram.div=null,myDiagram=GO(go.Diagram,Diagram_name,{initialAutoScale:go.Diagram.Uniform,"undoManager.isEnabled":!0,"animationManager.isEnabled":!1}),initOverview(),myDiagram.nodeTemplateMap.add("",square_node_simple_template());GO(go.Adornment,"Link",GO(go.Shape,{isPanelMain:!0,fill:null,stroke:"blue",strokeWidth:3}));myDiagram.linkTemplateMap.add("",bezier_link_template()),myDiagram.linkTemplateMap.add("c",flow_link_template()),myDiagram.toolManager.dragSelectingTool.box=GO(go.Part,{layerName:"Tool",selectable:!1},GO(go.Shape,{name:"SHAPE",fill:"#167CF3",stroke:"#167CF3",strokeWidth:2,opacity:.07})),myDiagram.toolManager.dragSelectingTool.delay=200,myDiagram.addDiagramListener("ChangedSelection",function(e){myDiagram.links.each(function(e){0==e.isSelected&&myDiagram.model.setDataProperty(e.data,"level","-1")}),myDiagram.nodes.each(function(e){0==e.isSelected&&null!=e.findObject("Shape_background")&&(e.findObject("Shape_background").stroke=e.data.d_stroke,e.findObject("Shape_background").fill="#fff",e.findObject("Shape_background").opacity=1)})}),myDiagram.scrollMode=go.Diagram.InfiniteScroll,myDiagram.toolManager.dragSelectingTool.selectInRect=function(e){var a=this.diagram;if(null!==a){var t=a.lastInput;a.raiseDiagramEvent("ChangingSelection");var n=a.findObjectsIn(e,function(e){var a=e.part,t=a.selectionObject;return e===t||e.isContainedBy(t)||a instanceof go.Link?a:null},function(e){return e.canSelect()},this.isPartialInclusion);if(t.meta||t.control)if(t.shift)for(var i=n.iterator;i.next();){var r=i.value;r.isSelected&&(r.isSelected=!1)}else for(i=n.iterator;i.next();){var o=i.value;o.isSelected=!o.isSelected}else if(t.shift)for(i=n.iterator;i.next();){var l=i.value;l.isSelected||(l.isSelected=!0)}else{for(var d=new go.List,s=a.selection.iterator;s.next();){var c=s.value;n.contains(c)||d.add(c)}for(var g=d.iterator;g.next();)g.value.isSelected=!1;for(i=n.iterator;i.next();){var m=i.value;m.isSelected||(m.isSelected=!0)}}a.raiseDiagramEvent("ChangedSelection")}};var e=new Worker("./js/graph/worker_sankey.js");e.postMessage({nodes:nodeArray,links:linkArray}),e.onmessage=function(e){switch(e.data.type){case"tick":return;case"end":document.getElementById("myDiagramDiv").style.zIndex=-1,document.getElementById("myPaletteDiv").style.zIndex=-1,document.getElementById("myGraph").style.zIndex=10,initGraph(e.data.nodes,e.data.links,layout),messagefuntion.changeGraphProperty(e.data.nodes,e.data.links,e.data.nodes.length,selectedNodes.size,hideNodes.size,e.data.links.length,selectedEdges.size,hideEdges.size),debounce(modelChange,1e3,0)(getDiagramData_GL().nodes,getDiagramData_GL().edges),console.log(new Date+"======================渲染完成..."),setTimeout(function(){document.querySelector(".loading").style.display="none",document.querySelector(".loading_box").style.display="none"},0)}}}