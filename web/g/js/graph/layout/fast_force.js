"use strict";function f_layout(){rendering_type="worker",linkArray.forEach(function(e){e.source=e.from,e.target=e.to}),myDiagram.div=null,myDiagram=GO(go.Diagram,Diagram_name,{initialAutoScale:go.Diagram.Uniform,"undoManager.isEnabled":!0,"animationManager.isEnabled":!1}),initOverview(),myDiagram.groupTemplate=group_node_coll_expand(),myDiagram.nodeTemplateMap.add("tree_square",tree_square_node_template()),myDiagram.nodeTemplateMap.add("square",square_node_template()),myDiagram.nodeTemplateMap.add("",circular_node_template()),myDiagram.nodeTemplateMap.add("emphasize",fivePoints_node_template()),myDiagram.nodeTemplateMap.add("square_text",square_text_template()),myDiagram.linkTemplateMap.add("routing",routing_link_template()),myDiagram.linkTemplateMap.add("",flow_link_template()),myDiagram.linkTemplateMap.add("bezier",bezier_link_template()),myDiagram.linkTemplateMap.add("dash",dash_link_template()),myDiagram.toolManager.dragSelectingTool.box=GO(go.Part,{layerName:"Tool",selectable:!1},GO(go.Shape,{name:"SHAPE",fill:"#167CF3",stroke:"#167CF3",strokeWidth:2,opacity:.07})),myDiagram.toolManager.dragSelectingTool.delay=200,myDiagram.addDiagramListener("ChangedSelection",function(e){myDiagram.links.each(function(e){0==e.isSelected&&myDiagram.model.setDataProperty(e.data,"level","-1")}),myDiagram.nodes.each(function(e){0==e.isSelected&&null!=e.findObject("Shape_background")&&(e.findObject("Shape_background").stroke=e.data.d_stroke,e.findObject("Shape_background").fill="#fff",e.findObject("Shape_background").opacity=1)})}),myDiagram.scrollMode=go.Diagram.InfiniteScroll,myDiagram.toolManager.dragSelectingTool.selectInRect=function(e){var a=this.diagram;if(null!==a){var t=a.lastInput;a.raiseDiagramEvent("ChangingSelection");var r=a.findObjectsIn(e,function(e){var a=e.part,t=a.selectionObject;return e===t||e.isContainedBy(t)||a instanceof go.Link?a:null},function(e){return e.canSelect()},this.isPartialInclusion);if(t.meta||t.control)if(t.shift)for(var o=r.iterator;o.next();){var n=o.value;n.isSelected&&(n.isSelected=!1)}else for(o=r.iterator;o.next();){var i=o.value;i.isSelected=!i.isSelected}else if(t.shift)for(o=r.iterator;o.next();){var l=o.value;l.isSelected||(l.isSelected=!0)}else{for(var d=new go.List,m=a.selection.iterator;m.next();){var s=m.value;r.contains(s)||d.add(s)}for(var g=d.iterator;g.next();)g.value.isSelected=!1;for(o=r.iterator;o.next();){var c=o.value;c.isSelected||(c.isSelected=!0)}}a.raiseDiagramEvent("ChangedSelection")}};var e=new Worker("./js/graph/layout/worker.js");e.postMessage({nodes:nodeArray,links:linkArray}),e.onmessage=function(e){switch(e.data.type){case"tick":return;case"end":myDiagram.model.nodeDataArray=e.data.nodes,myDiagram.model.linkDataArray=e.data.links,console.log(new Date+"======================layout计算完成时间"),messagefuntion.changeGraphProperty(graph_tool.getcurrentNodes(),graph_tool.getcurrentEdges(),graph_tool.getNodesCount(),graph_tool.nodesSelectCount(),graph_tool.nodesVisibleCount(),graph_tool.getEdgesCount(),graph_tool.edgesSelectCount(),graph_tool.edgesVisibleCount()),setTimeout(function(){myDiagram.commandHandler.zoomToFit(),document.querySelector(".loading").style.display="none",document.querySelector(".loading_box").style.display="none"})}}}