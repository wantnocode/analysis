"use strict";importScripts("../d3/d3-collection.v1.js"),importScripts("../d3/d3-dispatch.v1.js"),importScripts("../d3/d3-quadtree.v1.js"),importScripts("../d3/d3-timer.v1.js"),importScripts("../d3/d3-force.v1.js"),onmessage=function(o){var c=o.data.nodes,o=o.data.links,i=c.map(function(o){return o.key}),r=[],e=[];c.map(function(o){-1==e.indexOf(o.group)&&null!=o.group&&e.push(o.group)}),o.map(function(o){-1!=i.indexOf(o.from)&&-1!=i.indexOf(o.to)&&r.push(o)});var f=[];0<e.length&&r.map(function(o){var r,e,t,n;(r=o.from,e=o.to,c.map(function(o){o.key==r&&(t=o.group),o.key==e&&(n=o.group)}),t==n)&&-1!=i.indexOf(o.from)&&-1!=i.indexOf(o.to)&&f.push(o)});var t=d3.forceSimulation(c).force("charge",d3.forceManyBody()).force("link",d3.forceLink(r).distance(30).strength(.8)).force("x",d3.forceX()).force("y",d3.forceY()).stop();0<e.length&&(t=d3.forceSimulation(c).force("charge",d3.forceManyBody()).force("link",d3.forceLink(f)).force("x",d3.forceX().x(function(o){return 1200*e.indexOf(o.group)})).force("y",d3.forceY().y(function(o){return 100*Math.floor(e.indexOf(o.group)/3)})).stop());for(var n=0,d=Math.ceil(Math.log(t.alphaMin())/Math.log(1-t.alphaDecay()));n<d;++n)postMessage({type:"tick",progress:n/d}),t.tick();c.forEach(function(o){o.loc=o.x+" "+o.y}),postMessage({type:"end",nodes:c,links:r})};